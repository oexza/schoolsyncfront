{"version":3,"sources":["webpack:///1.9dada80105e2620eebb6.chunk.js","webpack:////home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.module.ts","webpack:////home/peace/Desktop/schoolsyncfront/src/app/school/school-protected-pages-guard.service.ts?5163","webpack:////home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.component.ts","webpack:////home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.component.css","webpack:////home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.component.html"],"names":["webpackJsonp","894","module","exports","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__angular_core__","__WEBPACK_IMPORTED_MODULE_1__angular_router__","__WEBPACK_IMPORTED_MODULE_2__angular_common__","__WEBPACK_IMPORTED_MODULE_3__dashboard_component__","__WEBPACK_IMPORTED_MODULE_4__school_school_protected_pages_guard_service__","d","DashboardModule","__decorate","this","decorators","target","key","desc","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__metadata","k","v","metadata","dashboardRoutes","path","component","canActivate","imports","forChild","declarations","896","__WEBPACK_IMPORTED_MODULE_1__services_auth_service__","__WEBPACK_IMPORTED_MODULE_2__angular_router__","__WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__","__WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__","n","SchoolProtectedPagesGuardService","authService","router","prototype","route","state","_this","schoolId","parent","params","isLoggedInAndBelongsToSchoolObservable","fromPromise","isLoggedInAndBelongsToSchool","map","res","redirectUrl","url","navigate","Promise","resolve","canLoad","isLoggedIn","_a","_b","902","DashboardComponent","ngOnInit","selector","template","styles","905","909"],"mappings":"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","file":"1.9dada80105e2620eebb6.chunk.js","sourcesContent":["webpackJsonp([1,5],{\n\n/***/ 894:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_router__ = __webpack_require__(489);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_common__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__dashboard_component__ = __webpack_require__(902);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__school_school_protected_pages_guard_service__ = __webpack_require__(896);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"DashboardModule\", function() { return DashboardModule; });\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\n\n\n\n\nvar dashboardRoutes = [\n    {\n        path: '',\n        component: __WEBPACK_IMPORTED_MODULE_3__dashboard_component__[\"a\" /* DashboardComponent */],\n        canActivate: [__WEBPACK_IMPORTED_MODULE_4__school_school_protected_pages_guard_service__[\"a\" /* SchoolProtectedPagesGuardService */]]\n    }\n];\nvar DashboardModule = (function () {\n    function DashboardModule() {\n    }\n    DashboardModule = __decorate([\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__[\"NgModule\"])({\n            imports: [\n                __WEBPACK_IMPORTED_MODULE_2__angular_common__[\"c\" /* CommonModule */],\n                __WEBPACK_IMPORTED_MODULE_1__angular_router__[\"a\" /* RouterModule */].forChild(dashboardRoutes)\n            ],\n            declarations: [__WEBPACK_IMPORTED_MODULE_3__dashboard_component__[\"a\" /* DashboardComponent */]]\n        }), \n        __metadata('design:paramtypes', [])\n    ], DashboardModule);\n    return DashboardModule;\n}());\n\n\n/***/ },\n\n/***/ 896:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_auth_service__ = __webpack_require__(490);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_router__ = __webpack_require__(489);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__ = __webpack_require__(166);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return SchoolProtectedPagesGuardService; });\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\n\n\n\n\nvar SchoolProtectedPagesGuardService = (function () {\n    function SchoolProtectedPagesGuardService(authService, router) {\n        this.authService = authService;\n        this.router = router;\n    }\n    SchoolProtectedPagesGuardService.prototype.canActivate = function (route, state) {\n        var _this = this;\n        var schoolId = route.parent.parent.params['schoolId'];\n        //alert(schoolId)\n        if (schoolId) {\n            var isLoggedInAndBelongsToSchoolObservable = __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__[\"Observable\"].fromPromise(this.authService.isLoggedInAndBelongsToSchool(schoolId));\n            return isLoggedInAndBelongsToSchoolObservable.map(function (res) {\n                if (res)\n                    return true;\n                // Store the attempted URL for redirecting\n                _this.authService.redirectUrl = state.url;\n                // Navigate to the school home page\n                _this.router.navigate(['/', schoolId]);\n                return false;\n            });\n        }\n        return __WEBPACK_IMPORTED_MODULE_3_rxjs_Observable__[\"Observable\"].fromPromise(Promise.resolve(false));\n    };\n    SchoolProtectedPagesGuardService.prototype.canLoad = function (route) {\n        return this.authService.isLoggedIn();\n    };\n    SchoolProtectedPagesGuardService = __decorate([\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__[\"Injectable\"])(), \n        __metadata('design:paramtypes', [(typeof (_a = typeof __WEBPACK_IMPORTED_MODULE_1__services_auth_service__[\"a\" /* AuthService */] !== 'undefined' && __WEBPACK_IMPORTED_MODULE_1__services_auth_service__[\"a\" /* AuthService */]) === 'function' && _a) || Object, (typeof (_b = typeof __WEBPACK_IMPORTED_MODULE_2__angular_router__[\"c\" /* Router */] !== 'undefined' && __WEBPACK_IMPORTED_MODULE_2__angular_router__[\"c\" /* Router */]) === 'function' && _b) || Object])\n    ], SchoolProtectedPagesGuardService);\n    return SchoolProtectedPagesGuardService;\n    var _a, _b;\n}());\n\n\n/***/ },\n\n/***/ 902:\n/***/ function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);\n/* harmony export (binding) */ __webpack_require__.d(exports, \"a\", function() { return DashboardComponent; });\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\n\nvar DashboardComponent = (function () {\n    function DashboardComponent() {\n    }\n    DashboardComponent.prototype.ngOnInit = function () {\n    };\n    DashboardComponent = __decorate([\n        __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0__angular_core__[\"Component\"])({\n            selector: 'app-dashboard',\n            template: __webpack_require__(909),\n            styles: [__webpack_require__(905)]\n        }), \n        __metadata('design:paramtypes', [])\n    ], DashboardComponent);\n    return DashboardComponent;\n}());\n\n\n/***/ },\n\n/***/ 905:\n/***/ function(module, exports) {\n\nmodule.exports = \"\"\n\n/***/ },\n\n/***/ 909:\n/***/ function(module, exports) {\n\nmodule.exports = \"<p>\\n  dashboard works!\\n</p>\\n\"\n\n/***/ }\n\n});\n\n\n// WEBPACK FOOTER //\n// 1.9dada80105e2620eebb6.chunk.js","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CommonModule } from '@angular/common';\nimport { DashboardComponent } from './dashboard.component';\nimport { SchoolProtectedPagesGuardService } from '../../school/school-protected-pages-guard.service';\n\nconst dashboardRoutes: Routes = [\n    {\n        path: '',\n        component: DashboardComponent,\n        canActivate: [SchoolProtectedPagesGuardService]\n    }\n]\n\n@NgModule({\n  imports: [\n    CommonModule,\n    RouterModule.forChild(dashboardRoutes)\n  ],\n  declarations: [DashboardComponent]\n})\nexport class DashboardModule { }\n\n\n\n// WEBPACK FOOTER //\n// /home/peace/Desktop/schoolsyncfront/~/angular2-template-loader!/home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.module.ts","import { Injectable } from '@angular/core';\nimport { AuthService } from '../services/auth.service';\nimport { CanActivate, Route, Router, CanLoad, ActivatedRouteSnapshot, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs/Observable';\n\nimport {\n  Angular2Apollo, ApolloQueryObservable\n} from 'angular2-apollo';\n\nimport 'rxjs/add/operator/map';\nimport gql from 'graphql-tag';\n\n@Injectable()\nexport class SchoolProtectedPagesGuardService implements CanActivate, CanLoad {\n\n  constructor(private authService: AuthService, private router: Router) { }\n\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot) {\n    var schoolId: string = route.parent.parent.params['schoolId']\n\n    //alert(schoolId)\n    if (schoolId) {\n      const isLoggedInAndBelongsToSchoolObservable: Observable<boolean> = Observable.fromPromise(this.authService.isLoggedInAndBelongsToSchool(schoolId))\n\n      return isLoggedInAndBelongsToSchoolObservable.map((res) => {\n        if (res)\n          return true;\n        // Store the attempted URL for redirecting\n        this.authService.redirectUrl = state.url;\n        // Navigate to the school home page\n        this.router.navigate(['/' ,schoolId]);\n        return false;\n      })\n\n    }\n    return Observable.fromPromise(Promise.resolve(false));\n  }\n\n  canLoad(route: Route) {\n    return this.authService.isLoggedIn();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/peace/Desktop/schoolsyncfront/~/angular2-template-loader!/home/peace/Desktop/schoolsyncfront/src/app/school/school-protected-pages-guard.service.ts","import { Component, OnInit } from '@angular/core';\n\n@Component({\n  selector: 'app-dashboard',\n  template: require('./dashboard.component.html'),\n  styles: [require('./dashboard.component.css')]\n})\nexport class DashboardComponent implements OnInit {\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// /home/peace/Desktop/schoolsyncfront/~/angular2-template-loader!/home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.component.ts","module.exports = \"\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.component.css\n// module id = 905\n// module chunks = 1","module.exports = \"<p>\\n  dashboard works!\\n</p>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// /home/peace/Desktop/schoolsyncfront/src/app/school/dashboard/dashboard.component.html\n// module id = 909\n// module chunks = 1"],"sourceRoot":""}