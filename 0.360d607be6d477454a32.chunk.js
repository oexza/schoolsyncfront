webpackJsonp([0,5],{895:function(t,e,o){"use strict";var n=o(0),r=o(23),a=o(61),i=o(899),c=o(903),f=o(898),u=o(900),s=o(896),d=o(491);o.d(e,"SchoolModule",function(){return h});var l=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},p=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},h=function(){function t(){}return t=l([o.i(n.NgModule)({imports:[r.c,d.a,a.b,a.e,c.a],declarations:[i.a,f.a],exports:[d.a],providers:[s.a,u.a]}),p("design:paramtypes",[])],t)}()},896:function(t,e,o){"use strict";var n=o(0),r=o(490),a=o(489),i=o(2),c=(o.n(i),o(166));o.n(c);o.d(e,"a",function(){return s});var f=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.canActivate=function(t,e){var o=this,n=t.parent.parent.params.schoolId;if(n){var r=i.Observable.fromPromise(this.authService.isLoggedInAndBelongsToSchool(n));return r.map(function(t){return!!t||(o.authService.redirectUrl=e.url,o.router.navigate(["/",n]),!1)})}return i.Observable.fromPromise(Promise.resolve(!1))},t.prototype.canLoad=function(t){return this.authService.isLoggedIn()},t=f([o.i(n.Injectable)(),u("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.a&&r.a)&&e||Object,"function"==typeof(c="undefined"!=typeof a.c&&a.c)&&c||Object])],t);var e,c}()},898:function(t,e,o){"use strict";var n=o(0),r=o(490),a=o(61),i=o(489);o.d(e,"a",function(){return u});var c=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},f=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e,o,n){this.auth=t,this.activatedRoute=e,this.router=o,this.formBuilder=n}return t.prototype.ngOnInit=function(){this.staffLoginForm=this.formBuilder.group({email:["",a.c.required],password:["",a.c.required]})},t.prototype.staffLogin=function(){var t=this;console.log(this.staffLoginForm.value);var e=this.staffLoginForm.value,o=this.activatedRoute.parent.snapshot.params.schoolId;this.auth.login({username:e.email,passsword:e.password,schoolId:o}).subscribe(function(e){alert(JSON.stringify(e)),e.staff&&(t.auth.redirectUrl?t.router.navigateByUrl(t.auth.redirectUrl):t.router.navigate(["/",o,"dashboard"]))})},t=c([o.i(n.Component)({selector:"app-school-home",template:o(910),styles:[o(906)]}),f("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.a&&r.a)&&e||Object,"function"==typeof(u="undefined"!=typeof i.b&&i.b)&&u||Object,"function"==typeof(s="undefined"!=typeof i.c&&i.c)&&s||Object,"function"==typeof(d="undefined"!=typeof a.d&&a.d)&&d||Object])],t);var e,u,s,d}()},899:function(t,e,o){"use strict";var n=o(0);o.d(e,"a",function(){return i});var r=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(){function t(){}return t.prototype.ngOnInit=function(){},t=r([o.i(n.Component)({selector:"app-school",template:o(911),styles:[o(907)]}),a("design:paramtypes",[])],t)}()},900:function(t,e,o){"use strict";var n=o(0),r=o(275),a=(o.n(r),o(166)),i=(o.n(a),o(492)),c=o.n(i);o.d(e,"a",function(){return l});var f,u=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=(f=["\nquery getSchool ($schoolIdentifier:String!){\n  findSchool(schoolIdentifier:$schoolIdentifier){\n    id\n  }\n}"],f.raw=["\nquery getSchool ($schoolIdentifier:String!){\n  findSchool(schoolIdentifier:$schoolIdentifier){\n    id\n  }\n}"],c()(f)),l=function(){function t(t){this.apollo=t}return t.prototype.canActivate=function(t,e){var o=t.params.schoolId;return this.apollo.query({query:d,variables:{schoolIdentifier:o}}).map(function(t){var e=t.data;return!!e.findSchool})},t.prototype.canLoad=function(t){return!0},t.prototype.canActivateChild=function(t,e){return this.canActivate(t,e)},t=u([o.i(n.Injectable)(),s("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.Angular2Apollo&&r.Angular2Apollo)&&e||Object])],t);var e}()},903:function(t,e,o){"use strict";var n=o(0),r=o(489),a=o(61),i=o(491),c=o(899),f=o(900),u=o(898);o.d(e,"a",function(){return p});var s=this&&this.__decorate||function(t,e,o,n){var r,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(i=(a<3?r(i):a>3?r(e,o,i):r(e,o))||i);return a>3&&i&&Object.defineProperty(e,o,i),i},d=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=[{path:"",component:c.a,canActivate:[f.a],children:[{path:"",component:u.a},{path:"dashboard",loadChildren:"app/school/dashboard/dashboard.module#DashboardModule"}]}],p=function(){function t(){}return t=s([o.i(n.NgModule)({imports:[r.a.forChild(l),i.a,a.e,a.b],exports:[r.a]}),d("design:paramtypes",[])],t)}()},906:function(t,e){t.exports=""},907:function(t,e){t.exports=""},910:function(t,e){t.exports='<div id="staff_login_card">\n  <md-card class="app-input-section">\n    <md-card-title>\n      <md-toolbar color="primary">Staff Login</md-toolbar>\n    </md-card-title>\n    <md-card-content>\n      <form [formGroup]="staffLoginForm" (ngSubmit)="staffLogin()">\n        <md-input style="width: 100%" formControlName="email" placeholder="Email"></md-input>\n\n        <md-input style="width: 100%" type="password" formControlName="password" #password placeholder="Password" maxlength="50">\n        </md-input>\n\n        <button style="width: 100%" type="submit" md-raised-button [disabled]="!staffLoginForm.valid" color="primary">\n          LOGIN\n          </button>\n      </form>\n    </md-card-content>\n  </md-card>\n</div>'},911:function(t,e){t.exports="<p>\n  school works!\n\n  <router-outlet></router-outlet>\n</p>\n"}});
//# sourceMappingURL=0.360d607be6d477454a32.bundle.map